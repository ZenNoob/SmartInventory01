===================================================================
SỬA LỖI GIÁ NHẬP BỊ MẤT KHI CHỈNH SỬA SẢN PHẨM
===================================================================

VẤN ĐỀ:
--------
Khi người dùng thêm sản phẩm với giá nhập (cost price), sau đó chỉnh 
sửa sản phẩm thì giá nhập bị mất (hiển thị 0 hoặc trống).

NGUYÊN NHÂN:
------------
1. Backend API trả về trường `costPrice` từ stored procedure ✓
2. Frontend action map `costPrice` thành `averageCost` trong ProductWithStock ✓
3. NHƯNG khi chuyển đổi sang `productForForm` để truyền vào ProductForm,
   trường `costPrice` KHÔNG được bao gồm ✗
4. Interface `Product` trong ProductForm không có trường `costPrice` ✗
5. Form reset với `costPrice: 0` thay vì giá trị thực ✗

GIẢI PHÁP:
----------
1. Thêm trường `costPrice` vào interface `Product` trong ProductForm
2. Thêm trường `purchaseLots` vào interface `Product` 
3. Khi tạo `productForForm`, map `averageCost` thành `costPrice`:
   costPrice: selectedProduct.averageCost
4. Sửa `defaultValues` để dùng `product.costPrice` thay vì `(product as any).costPrice`
5. Sửa `useEffect` reset form để dùng `product.costPrice` thay vì `(product as any).costPrice`

FILES ĐÃ SỬA:
-------------
1. SmartInventory/frontend/src/app/products/page.tsx
   - Thêm: costPrice: selectedProduct.averageCost vào productForForm

2. SmartInventory/frontend/src/app/products/components/product-form.tsx
   - Thêm costPrice?: number vào interface Product
   - Thêm purchaseLots?: PurchaseLot[] vào interface Product
   - Sửa defaultValues để dùng product.costPrice
   - Sửa useEffect reset để dùng product.costPrice

KẾT QUẢ:
--------
✓ Giá nhập được giữ nguyên khi chỉnh sửa sản phẩm
✓ Form hiển thị đúng giá nhập đã lưu trước đó
✓ Người dùng có thể chỉnh sửa giá nhập nếu muốn
✓ Nếu không chỉnh sửa, giá nhập vẫn được giữ nguyên

TEST:
-----
Backend test: npx ts-node scripts/test-product-cost-price-preservation.ts
✓ All tests passed

Frontend: 
- Mở trang Products
- Thêm sản phẩm mới với giá nhập (ví dụ: 50,000 VND)
- Lưu sản phẩm
- Click "Chỉnh sửa" trên sản phẩm vừa tạo
- Kiểm tra: Giá nhập vẫn hiển thị 50,000 VND ✓
- Thay đổi tên sản phẩm (không đổi giá nhập)
- Lưu
- Mở lại form chỉnh sửa
- Kiểm tra: Giá nhập vẫn là 50,000 VND ✓

LƯU Ý:
-------
- Giá nhập (costPrice) là giá trung bình được tính từ các lô nhập hàng
- Khi có lô nhập hàng mới, giá nhập trung bình sẽ được cập nhật tự động
- Người dùng có thể chỉnh sửa giá nhập thủ công nếu cần
